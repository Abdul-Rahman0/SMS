{% extends "base.html" %}

{% block title %}Student Payments{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6 text-center">My Course Payments</h1>
    <table class="min-w-full bg-white rounded shadow">
        <thead>
            <tr>
                <th class="py-2 px-4">Course</th>
                <th class="py-2 px-4">Amount</th>
                <th class="py-2 px-4">Status</th>
                <th class="py-2 px-4">Action</th>
            </tr>
        </thead>
        <tbody>
        {% for item in course_payments %}
            <tr>
                <td class="py-2 px-4">{{ item.course.course_name }}</td>
                <td class="py-2 px-4">
                    {% if item.payment %}
                        ${{ item.payment.amount }}
                    {% else %}
                        $1000
                    {% endif %}
                </td>
                <td class="py-2 px-4">
                    {% if item.payment and item.payment.status == 'paid' %}
                        <span class="text-green-600 font-bold">Paid</span>
                    {% else %}
                        <span class="text-red-600 font-bold">Pending</span>
                    {% endif %}
                </td>
                <td class="py-2 px-4">
                    {% if not item.payment or item.payment.status != 'paid' %}
                        <a href="{% url 'courses:fake_payment_gateway' item.course.course_id %}" class="bg-blue-500 text-white px-3 py-1 rounded">Pay</a>
                    {% else %}
                        <span class="text-gray-500">-</span>
                    {% endif %}
                </td>
            </tr>
        {% empty %}
            <tr><td colspan="4" class="text-center py-4">No enrolled courses.</td></tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %} 