{% extends 'base.html' %}

{% block page_title %}Submissions for {{ assignment.title }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6 text-center">Submissions for {{ assignment.title }}</h1>
    <p class="text-xl text-gray-700 mb-6 text-center">Course: {{ assignment.course.name }}</p>

    <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md">
        {% if submissions %}
            <ul class="divide-y divide-gray-200">
                {% for submission in submissions %}
                <li class="py-4 flex justify-between items-center">
                    <div>
                        <p class="text-lg font-semibold text-gray-800">Student: {{ submission.student.name }}</p>
                        <p class="text-gray-600 text-sm">Submitted At: {{ submission.submitted_at|date:"Y-m-d H:i" }}</p>
                        {% if submission.file %}
                            <p class="text-gray-600 text-sm mt-1"><a href="{{ submission.file.url }}" class="text-blue-600 hover:underline" download>Download File</a></p>
                        {% endif %}
                    </div>
                    <div class="text-right">
                        <p class="text-gray-700 mb-2"><strong class="text-gray-900">Grade:</strong>
                             {% with student_id=submission.student.id %}
                                {% if student_id in grades_dict %}
                                    {{ grades_dict|get_item:student_id|default:"Not Graded Yet" }}
                                {% else %}
                                    Not Graded Yet
                                {% endif %}
                             {% endwith %}
                        </p>
                        {# Placeholder for Grade Input/Edit Link #}
                        <a href="#" class="text-green-600 hover:underline">Grade</a> {# Link to grading interface later #}
                    </div>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-gray-700">No submissions yet for this assignment.</p>
        {% endif %}

        <div class="mt-6 text-center">
             <a href="{% url 'courses:teacher_assignment_list' assignment.course.id %}" class="text-gray-600 hover:underline">Back to Assignments</a>
        </div>

    </div>

</div>

{# Custom filter to get dictionary item by key in template #}
{% load custom_filters %}

{% endblock %} 